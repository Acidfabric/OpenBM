GAS LISTING /tmp/cclbRunW.s 			page 1


   1               		.file	"buttons.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__  = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/media/sda6/home/tevs/src/psyBMW_trunk/avr/BordMonitor/",100,0,2,.Ltext0
  11               		.stabs	"buttons.c",100,0,2,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,1,0
  16               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,1,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,1,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,1,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,1,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,1,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,1,0
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,1,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,1,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,1,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,1,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,1,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,1,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,1,0
  29               		.stabs	"void:t(0,15)=(0,15)",128,0,1,0
  30               		.stabs	"buttons.h",130,0,0,0
  31               		.stabs	"./include/base.h",130,0,0,0
  32               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/io.h",130,0,0,0
  33               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  34               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/inttypes.h",130,0,0,0
  35               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdint.h",130,0,0,0
  36               		.stabs	"int8_t:t(6,1)=(0,10)",128,0,121,0
  37               		.stabs	"uint8_t:t(6,2)=(0,11)",128,0,122,0
  38               		.stabs	"int16_t:t(6,3)=(0,1)",128,0,123,0
  39               		.stabs	"uint16_t:t(6,4)=(0,4)",128,0,124,0
  40               		.stabs	"int32_t:t(6,5)=(0,3)",128,0,125,0
  41               		.stabs	"uint32_t:t(6,6)=(0,5)",128,0,126,0
  42               		.stabs	"int64_t:t(6,7)=(0,6)",128,0,128,0
  43               		.stabs	"uint64_t:t(6,8)=(0,7)",128,0,129,0
  44               		.stabs	"intptr_t:t(6,9)=(6,3)",128,0,142,0
  45               		.stabs	"uintptr_t:t(6,10)=(6,4)",128,0,147,0
  46               		.stabs	"int_least8_t:t(6,11)=(6,1)",128,0,159,0
  47               		.stabs	"uint_least8_t:t(6,12)=(6,2)",128,0,164,0
  48               		.stabs	"int_least16_t:t(6,13)=(6,3)",128,0,169,0
  49               		.stabs	"uint_least16_t:t(6,14)=(6,4)",128,0,174,0
  50               		.stabs	"int_least32_t:t(6,15)=(6,5)",128,0,179,0
  51               		.stabs	"uint_least32_t:t(6,16)=(6,6)",128,0,184,0
  52               		.stabs	"int_least64_t:t(6,17)=(6,7)",128,0,192,0
  53               		.stabs	"uint_least64_t:t(6,18)=(6,8)",128,0,199,0
  54               		.stabs	"int_fast8_t:t(6,19)=(6,1)",128,0,213,0
  55               		.stabs	"uint_fast8_t:t(6,20)=(6,2)",128,0,218,0
  56               		.stabs	"int_fast16_t:t(6,21)=(6,3)",128,0,223,0
  57               		.stabs	"uint_fast16_t:t(6,22)=(6,4)",128,0,228,0
GAS LISTING /tmp/cclbRunW.s 			page 2


  58               		.stabs	"int_fast32_t:t(6,23)=(6,5)",128,0,233,0
  59               		.stabs	"uint_fast32_t:t(6,24)=(6,6)",128,0,238,0
  60               		.stabs	"int_fast64_t:t(6,25)=(6,7)",128,0,246,0
  61               		.stabs	"uint_fast64_t:t(6,26)=(6,8)",128,0,253,0
  62               		.stabs	"intmax_t:t(6,27)=(6,7)",128,0,273,0
  63               		.stabs	"uintmax_t:t(6,28)=(6,8)",128,0,278,0
  64               		.stabn	162,0,0,0
  65               		.stabs	"int_farptr_t:t(5,1)=(6,5)",128,0,77,0
  66               		.stabs	"uint_farptr_t:t(5,2)=(6,6)",128,0,81,0
  67               		.stabn	162,0,0,0
  68               		.stabn	162,0,0,0
  69               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/fuse.h",130,0,0,0
  70               		.stabs	"__fuse_t:t(7,1)=(7,2)=s2low:(0,11),0,8;high:(0,11),8,8;;",128,0,247,0
  71               		.stabn	162,0,0,0
  72               		.stabn	162,0,0,0
  73               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/stdlib.h",130,0,0,0
  74               		.stabs	"/usr/lib/gcc/avr/4.3.4/include/stddef.h",130,0,0,0
  75               		.stabs	"size_t:t(9,1)=(0,4)",128,0,214,0
  76               		.stabs	"wchar_t:t(9,2)=(0,1)",128,0,326,0
  77               		.stabn	162,0,0,0
  78               		.stabs	"div_t:t(8,1)=(8,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
  79               		.stabs	"ldiv_t:t(8,3)=(8,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
  80               		.stabs	"__compar_fn_t:t(8,5)=(8,6)=*(8,7)=f(0,1)",128,0,80,0
  81               		.stabn	162,0,0,0
  82               		.stabs	"/usr/lib/gcc/avr/4.3.4/../../../avr/include/avr/pgmspace.h",130,0,0,0
  83               		.stabs	"prog_void:t(10,1)=(10,2)=(10,2)",128,0,211,0
  84               		.stabs	"prog_char:t(10,3)=(10,4)=@s8;r(10,4);0;255;",128,0,212,0
  85               		.stabs	"prog_uchar:t(10,5)=(10,4)",128,0,213,0
  86               		.stabs	"prog_int8_t:t(10,6)=(10,7)=(0,10)",128,0,215,0
  87               		.stabs	"prog_uint8_t:t(10,8)=(10,4)",128,0,216,0
  88               		.stabs	"prog_int16_t:t(10,9)=(10,10)=(0,1)",128,0,217,0
  89               		.stabs	"prog_uint16_t:t(10,11)=(10,12)=(0,4)",128,0,218,0
  90               		.stabs	"prog_int32_t:t(10,13)=(10,14)=(0,3)",128,0,219,0
  91               		.stabs	"prog_uint32_t:t(10,15)=(10,16)=(0,5)",128,0,220,0
  92               		.stabs	"prog_int64_t:t(10,17)=(10,18)=(0,6)",128,0,222,0
  93               		.stabs	"prog_uint64_t:t(10,19)=(10,20)=(0,7)",128,0,223,0
  94               		.stabn	162,0,0,0
  95               		.stabs	"ticks_t:t(2,1)=(6,6)",128,0,48,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"buttonIndex_t:t(1,1)=(6,2)",128,0,32,0
  98               		.stabs	"buttonGlobalState_t:t(1,2)=(6,6)",128,0,86,0
  99               		.stabs	"buttonBool_t:t(1,3)=(6,2)",128,0,87,0
 100               		.stabn	162,0,0,0
 101               		.stabs	"button:F(1,3)",36,0,19,button
 102               		.stabs	"id:P(1,1)",64,0,19,24
 103               	.global	button
 104               		.type	button, @function
 105               	button:
 106               		.stabd	46,0,0
   0:buttons.c     **** #include "buttons.h"
   1:buttons.c     **** #include "i2cmaster.h"
   2:buttons.c     **** 
   3:buttons.c     **** #define EJECT_BUTTON_STATE() bit_is_clear(PIND,4)
   4:buttons.c     **** #define ENABLE_RADIO_BUTTON_LEFT_PART() {PORTC &= ~(1 << 6); PORTC |= (1 << 7);}
   5:buttons.c     **** #define ENABLE_RADIO_BUTTON_RIGHT_PART() {PORTC &= ~(1 << 7); PORTC |= (1 << 6);}
   6:buttons.c     **** 
   7:buttons.c     **** buttonGlobalState_t g_buttons = 0;
GAS LISTING /tmp/cclbRunW.s 			page 3


   8:buttons.c     **** buttonGlobalState_t g_buttonsDown = 0;
   9:buttons.c     **** buttonGlobalState_t g_buttonsPressed = 0;
  10:buttons.c     **** buttonGlobalState_t g_buttonsRelease = 0;
  11:buttons.c     **** 
  12:buttons.c     **** buttonGlobalState_t g_buttons_last = 0;
  13:buttons.c     **** buttonGlobalState_t g_buttonsDown_last = 0;
  14:buttons.c     **** buttonGlobalState_t g_buttonsPressed_last = 0;
  15:buttons.c     **** buttonGlobalState_t g_buttonsRelease_last = 0;
  16:buttons.c     **** 
  17:buttons.c     **** //------------------------------------------------------------------------------
  18:buttons.c     **** buttonBool_t button(buttonIndex_t id) { return is_bit_set(g_buttons,id); }
 107               		.stabn	68,0,19,.LM0-.LFBB1
 108               	.LM0:
 109               	.LFBB1:
 110               	/* prologue: function */
 111               	/* frame size = 0 */
 112               		.stabn	68,0,19,.LM1-.LFBB1
 113               	.LM1:
 114 0000 2091 0000 		lds r18,g_buttons
 115 0004 3091 0000 		lds r19,(g_buttons)+1
 116 0008 4091 0000 		lds r20,(g_buttons)+2
 117 000c 5091 0000 		lds r21,(g_buttons)+3
 118 0010 00C0      		rjmp 2f
 119 0012 5695      	1:	lsr r21
 120 0014 4795      		ror r20
 121 0016 3795      		ror r19
 122 0018 2795      		ror r18
 123 001a 8A95      	2:	dec r24
 124 001c 02F4      		brpl 1b
 125 001e 822F      		mov r24,r18
 126 0020 8170      		andi r24,lo8(1)
 127               	/* epilogue start */
 128 0022 0895      		ret
 129               		.size	button, .-button
 130               	.Lscope1:
 131               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 132               		.stabd	78,0,0
 133               		.stabs	"button_down:F(1,3)",36,0,20,button_down
 134               		.stabs	"id:P(1,1)",64,0,20,24
 135               	.global	button_down
 136               		.type	button_down, @function
 137               	button_down:
 138               		.stabd	46,0,0
  19:buttons.c     **** buttonBool_t button_down(buttonIndex_t id) { return is_bit_set(g_buttonsDown,id); }
 139               		.stabn	68,0,20,.LM2-.LFBB2
 140               	.LM2:
 141               	.LFBB2:
 142               	/* prologue: function */
 143               	/* frame size = 0 */
 144               		.stabn	68,0,20,.LM3-.LFBB2
 145               	.LM3:
 146 0024 2091 0000 		lds r18,g_buttonsDown
 147 0028 3091 0000 		lds r19,(g_buttonsDown)+1
 148 002c 4091 0000 		lds r20,(g_buttonsDown)+2
 149 0030 5091 0000 		lds r21,(g_buttonsDown)+3
 150 0034 00C0      		rjmp 2f
 151 0036 5695      	1:	lsr r21
GAS LISTING /tmp/cclbRunW.s 			page 4


 152 0038 4795      		ror r20
 153 003a 3795      		ror r19
 154 003c 2795      		ror r18
 155 003e 8A95      	2:	dec r24
 156 0040 02F4      		brpl 1b
 157 0042 822F      		mov r24,r18
 158 0044 8170      		andi r24,lo8(1)
 159               	/* epilogue start */
 160 0046 0895      		ret
 161               		.size	button_down, .-button_down
 162               	.Lscope2:
 163               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 164               		.stabd	78,0,0
 165               		.stabs	"button_pressed:F(1,3)",36,0,21,button_pressed
 166               		.stabs	"id:P(1,1)",64,0,21,24
 167               	.global	button_pressed
 168               		.type	button_pressed, @function
 169               	button_pressed:
 170               		.stabd	46,0,0
  20:buttons.c     **** buttonBool_t button_pressed(buttonIndex_t id) { return is_bit_set(g_buttonsPressed,id); }
 171               		.stabn	68,0,21,.LM4-.LFBB3
 172               	.LM4:
 173               	.LFBB3:
 174               	/* prologue: function */
 175               	/* frame size = 0 */
 176               		.stabn	68,0,21,.LM5-.LFBB3
 177               	.LM5:
 178 0048 2091 0000 		lds r18,g_buttonsPressed
 179 004c 3091 0000 		lds r19,(g_buttonsPressed)+1
 180 0050 4091 0000 		lds r20,(g_buttonsPressed)+2
 181 0054 5091 0000 		lds r21,(g_buttonsPressed)+3
 182 0058 00C0      		rjmp 2f
 183 005a 5695      	1:	lsr r21
 184 005c 4795      		ror r20
 185 005e 3795      		ror r19
 186 0060 2795      		ror r18
 187 0062 8A95      	2:	dec r24
 188 0064 02F4      		brpl 1b
 189 0066 822F      		mov r24,r18
 190 0068 8170      		andi r24,lo8(1)
 191               	/* epilogue start */
 192 006a 0895      		ret
 193               		.size	button_pressed, .-button_pressed
 194               	.Lscope3:
 195               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 196               		.stabd	78,0,0
 197               		.stabs	"button_released:F(1,3)",36,0,22,button_released
 198               		.stabs	"id:P(1,1)",64,0,22,24
 199               	.global	button_released
 200               		.type	button_released, @function
 201               	button_released:
 202               		.stabd	46,0,0
  21:buttons.c     **** buttonBool_t button_released(buttonIndex_t id) { return is_bit_set(g_buttonsRelease,id); }
 203               		.stabn	68,0,22,.LM6-.LFBB4
 204               	.LM6:
 205               	.LFBB4:
 206               	/* prologue: function */
GAS LISTING /tmp/cclbRunW.s 			page 5


 207               	/* frame size = 0 */
 208               		.stabn	68,0,22,.LM7-.LFBB4
 209               	.LM7:
 210 006c 2091 0000 		lds r18,g_buttonsRelease
 211 0070 3091 0000 		lds r19,(g_buttonsRelease)+1
 212 0074 4091 0000 		lds r20,(g_buttonsRelease)+2
 213 0078 5091 0000 		lds r21,(g_buttonsRelease)+3
 214 007c 00C0      		rjmp 2f
 215 007e 5695      	1:	lsr r21
 216 0080 4795      		ror r20
 217 0082 3795      		ror r19
 218 0084 2795      		ror r18
 219 0086 8A95      	2:	dec r24
 220 0088 02F4      		brpl 1b
 221 008a 822F      		mov r24,r18
 222 008c 8170      		andi r24,lo8(1)
 223               	/* epilogue start */
 224 008e 0895      		ret
 225               		.size	button_released, .-button_released
 226               	.Lscope4:
 227               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 228               		.stabd	78,0,0
 229               		.stabs	"button_global:F(1,2)",36,0,25,button_global
 230               	.global	button_global
 231               		.type	button_global, @function
 232               	button_global:
 233               		.stabd	46,0,0
  22:buttons.c     **** 
  23:buttons.c     **** //------------------------------------------------------------------------------
  24:buttons.c     **** buttonGlobalState_t button_global(void) { return g_buttons; }
 234               		.stabn	68,0,25,.LM8-.LFBB5
 235               	.LM8:
 236               	.LFBB5:
 237               	/* prologue: function */
 238               	/* frame size = 0 */
 239               		.stabn	68,0,25,.LM9-.LFBB5
 240               	.LM9:
 241 0090 6091 0000 		lds r22,g_buttons
 242 0094 7091 0000 		lds r23,g_buttons+1
 243 0098 8091 0000 		lds r24,g_buttons+2
 244 009c 9091 0000 		lds r25,g_buttons+3
 245               	/* epilogue start */
 246 00a0 0895      		ret
 247               		.size	button_global, .-button_global
 248               	.Lscope5:
 249               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 250               		.stabd	78,0,0
 251               		.stabs	"button_global_down:F(1,2)",36,0,26,button_global_down
 252               	.global	button_global_down
 253               		.type	button_global_down, @function
 254               	button_global_down:
 255               		.stabd	46,0,0
  25:buttons.c     **** buttonGlobalState_t button_global_down(void) { return g_buttonsDown; }
 256               		.stabn	68,0,26,.LM10-.LFBB6
 257               	.LM10:
 258               	.LFBB6:
 259               	/* prologue: function */
GAS LISTING /tmp/cclbRunW.s 			page 6


 260               	/* frame size = 0 */
 261               		.stabn	68,0,26,.LM11-.LFBB6
 262               	.LM11:
 263 00a2 6091 0000 		lds r22,g_buttonsDown
 264 00a6 7091 0000 		lds r23,g_buttonsDown+1
 265 00aa 8091 0000 		lds r24,g_buttonsDown+2
 266 00ae 9091 0000 		lds r25,g_buttonsDown+3
 267               	/* epilogue start */
 268 00b2 0895      		ret
 269               		.size	button_global_down, .-button_global_down
 270               	.Lscope6:
 271               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 272               		.stabd	78,0,0
 273               		.stabs	"button_global_pressed:F(1,2)",36,0,27,button_global_pressed
 274               	.global	button_global_pressed
 275               		.type	button_global_pressed, @function
 276               	button_global_pressed:
 277               		.stabd	46,0,0
  26:buttons.c     **** buttonGlobalState_t button_global_pressed(void) { return g_buttonsPressed; }
 278               		.stabn	68,0,27,.LM12-.LFBB7
 279               	.LM12:
 280               	.LFBB7:
 281               	/* prologue: function */
 282               	/* frame size = 0 */
 283               		.stabn	68,0,27,.LM13-.LFBB7
 284               	.LM13:
 285 00b4 6091 0000 		lds r22,g_buttonsPressed
 286 00b8 7091 0000 		lds r23,g_buttonsPressed+1
 287 00bc 8091 0000 		lds r24,g_buttonsPressed+2
 288 00c0 9091 0000 		lds r25,g_buttonsPressed+3
 289               	/* epilogue start */
 290 00c4 0895      		ret
 291               		.size	button_global_pressed, .-button_global_pressed
 292               	.Lscope7:
 293               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 294               		.stabd	78,0,0
 295               		.stabs	"button_global_released:F(1,2)",36,0,28,button_global_released
 296               	.global	button_global_released
 297               		.type	button_global_released, @function
 298               	button_global_released:
 299               		.stabd	46,0,0
  27:buttons.c     **** buttonGlobalState_t button_global_released(void) { return g_buttonsRelease; }
 300               		.stabn	68,0,28,.LM14-.LFBB8
 301               	.LM14:
 302               	.LFBB8:
 303               	/* prologue: function */
 304               	/* frame size = 0 */
 305               		.stabn	68,0,28,.LM15-.LFBB8
 306               	.LM15:
 307 00c6 6091 0000 		lds r22,g_buttonsRelease
 308 00ca 7091 0000 		lds r23,g_buttonsRelease+1
 309 00ce 8091 0000 		lds r24,g_buttonsRelease+2
 310 00d2 9091 0000 		lds r25,g_buttonsRelease+3
 311               	/* epilogue start */
 312 00d6 0895      		ret
 313               		.size	button_global_released, .-button_global_released
 314               	.Lscope8:
GAS LISTING /tmp/cclbRunW.s 			page 7


 315               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 316               		.stabd	78,0,0
 317               		.stabs	"button_init:F(0,15)",36,0,32,button_init
 318               	.global	button_init
 319               		.type	button_init, @function
 320               	button_init:
 321               		.stabd	46,0,0
  28:buttons.c     **** 
  29:buttons.c     **** //------------------------------------------------------------------------------
  30:buttons.c     **** void button_init(void)
  31:buttons.c     **** {
 322               		.stabn	68,0,32,.LM16-.LFBB9
 323               	.LM16:
 324               	.LFBB9:
 325               	/* prologue: function */
 326               	/* frame size = 0 */
  32:buttons.c     ****     //memset(g_oldButtonState, 0, sizeof(ButtonState));
  33:buttons.c     ****     //memset(g_ButtonState, 0, sizeof(ButtonState));
  34:buttons.c     **** 
  35:buttons.c     ****     g_buttons = 0;
 327               		.stabn	68,0,36,.LM17-.LFBB9
 328               	.LM17:
 329 00d8 1092 0000 		sts g_buttons,__zero_reg__
 330 00dc 1092 0000 		sts (g_buttons)+1,__zero_reg__
 331 00e0 1092 0000 		sts (g_buttons)+2,__zero_reg__
 332 00e4 1092 0000 		sts (g_buttons)+3,__zero_reg__
  36:buttons.c     ****     g_buttonsDown = 0;
 333               		.stabn	68,0,37,.LM18-.LFBB9
 334               	.LM18:
 335 00e8 1092 0000 		sts g_buttonsDown,__zero_reg__
 336 00ec 1092 0000 		sts (g_buttonsDown)+1,__zero_reg__
 337 00f0 1092 0000 		sts (g_buttonsDown)+2,__zero_reg__
 338 00f4 1092 0000 		sts (g_buttonsDown)+3,__zero_reg__
  37:buttons.c     ****     g_buttonsPressed = 0;
 339               		.stabn	68,0,38,.LM19-.LFBB9
 340               	.LM19:
 341 00f8 1092 0000 		sts g_buttonsPressed,__zero_reg__
 342 00fc 1092 0000 		sts (g_buttonsPressed)+1,__zero_reg__
 343 0100 1092 0000 		sts (g_buttonsPressed)+2,__zero_reg__
 344 0104 1092 0000 		sts (g_buttonsPressed)+3,__zero_reg__
  38:buttons.c     ****     g_buttonsRelease = 0;
 345               		.stabn	68,0,39,.LM20-.LFBB9
 346               	.LM20:
 347 0108 1092 0000 		sts g_buttonsRelease,__zero_reg__
 348 010c 1092 0000 		sts (g_buttonsRelease)+1,__zero_reg__
 349 0110 1092 0000 		sts (g_buttonsRelease)+2,__zero_reg__
 350 0114 1092 0000 		sts (g_buttonsRelease)+3,__zero_reg__
  39:buttons.c     **** 
  40:buttons.c     ****     g_buttons_last = 0;
 351               		.stabn	68,0,41,.LM21-.LFBB9
 352               	.LM21:
 353 0118 1092 0000 		sts g_buttons_last,__zero_reg__
 354 011c 1092 0000 		sts (g_buttons_last)+1,__zero_reg__
 355 0120 1092 0000 		sts (g_buttons_last)+2,__zero_reg__
 356 0124 1092 0000 		sts (g_buttons_last)+3,__zero_reg__
  41:buttons.c     ****     g_buttonsDown_last = 0;
 357               		.stabn	68,0,42,.LM22-.LFBB9
GAS LISTING /tmp/cclbRunW.s 			page 8


 358               	.LM22:
 359 0128 1092 0000 		sts g_buttonsDown_last,__zero_reg__
 360 012c 1092 0000 		sts (g_buttonsDown_last)+1,__zero_reg__
 361 0130 1092 0000 		sts (g_buttonsDown_last)+2,__zero_reg__
 362 0134 1092 0000 		sts (g_buttonsDown_last)+3,__zero_reg__
  42:buttons.c     ****     g_buttonsPressed_last = 0;
 363               		.stabn	68,0,43,.LM23-.LFBB9
 364               	.LM23:
 365 0138 1092 0000 		sts g_buttonsPressed_last,__zero_reg__
 366 013c 1092 0000 		sts (g_buttonsPressed_last)+1,__zero_reg__
 367 0140 1092 0000 		sts (g_buttonsPressed_last)+2,__zero_reg__
 368 0144 1092 0000 		sts (g_buttonsPressed_last)+3,__zero_reg__
  43:buttons.c     ****     g_buttonsRelease_last = 0;
 369               		.stabn	68,0,44,.LM24-.LFBB9
 370               	.LM24:
 371 0148 1092 0000 		sts g_buttonsRelease_last,__zero_reg__
 372 014c 1092 0000 		sts (g_buttonsRelease_last)+1,__zero_reg__
 373 0150 1092 0000 		sts (g_buttonsRelease_last)+2,__zero_reg__
 374 0154 1092 0000 		sts (g_buttonsRelease_last)+3,__zero_reg__
  44:buttons.c     **** 
  45:buttons.c     ****     // eject button
  46:buttons.c     ****     DDRD &= ~(1 << 4); PORTD |= (1 << 4);
 375               		.stabn	68,0,47,.LM25-.LFBB9
 376               	.LM25:
 377 0158 8C98      		cbi 49-32,4
 378 015a 949A      		sbi 50-32,4
  47:buttons.c     **** 
  48:buttons.c     ****     // button switcher on radio PCB
  49:buttons.c     ****     DDRC |= (1 << 6) | (1 << 7);
 379               		.stabn	68,0,50,.LM26-.LFBB9
 380               	.LM26:
 381 015c 84B3      		in r24,52-32
 382 015e 806C      		ori r24,lo8(-64)
 383 0160 84BB      		out 52-32,r24
 384               	/* epilogue start */
  50:buttons.c     **** }
 385               		.stabn	68,0,51,.LM27-.LFBB9
 386               	.LM27:
 387 0162 0895      		ret
 388               		.size	button_init, .-button_init
 389               	.Lscope9:
 390               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 391               		.stabd	78,0,0
 392               		.stabs	"button_tick:F(0,15)",36,0,55,button_tick
 393               	.global	button_tick
 394               		.type	button_tick, @function
 395               	button_tick:
 396               		.stabd	46,0,0
  51:buttons.c     **** 
  52:buttons.c     **** //------------------------------------------------------------------------------
  53:buttons.c     **** void button_tick(void)
  54:buttons.c     **** {
 397               		.stabn	68,0,55,.LM28-.LFBB10
 398               	.LM28:
 399               	.LFBB10:
 400 0164 6F92      		push r6
 401 0166 7F92      		push r7
GAS LISTING /tmp/cclbRunW.s 			page 9


 402 0168 8F92      		push r8
 403 016a 9F92      		push r9
 404 016c AF92      		push r10
 405 016e BF92      		push r11
 406 0170 CF92      		push r12
 407 0172 DF92      		push r13
 408 0174 EF92      		push r14
 409 0176 FF92      		push r15
 410 0178 0F93      		push r16
 411 017a 1F93      		push r17
 412               	/* prologue: function */
 413               	/* frame size = 0 */
  55:buttons.c     ****     // ----- First read the Radio Part -----
  56:buttons.c     ****     if (i2c_start(PORT_EXPANDER_RADIO_ADD + I2C_READ) == 0)
 414               		.stabn	68,0,57,.LM29-.LFBB10
 415               	.LM29:
 416 017c 83E4      		ldi r24,lo8(67)
 417 017e 0E94 0000 		call i2c_start
 418 0182 8823      		tst r24
 419 0184 01F0      		breq .+2
 420 0186 00C0      		rjmp .L20
 421               	.LBB2:
  57:buttons.c     ****     {
  58:buttons.c     ****         unsigned char state = ~(i2c_readNak());
 422               		.stabn	68,0,59,.LM30-.LFBB10
 423               	.LM30:
 424 0188 0E94 0000 		call i2c_readNak
 425 018c 182F      		mov r17,r24
 426 018e 1095      		com r17
  59:buttons.c     ****         i2c_stop();
 427               		.stabn	68,0,60,.LM31-.LFBB10
 428               	.LM31:
 429 0190 0E94 0000 		call i2c_stop
  60:buttons.c     **** 
  61:buttons.c     ****         // first two bits ignored
  62:buttons.c     ****         state >>= 2;
 430               		.stabn	68,0,63,.LM32-.LFBB10
 431               	.LM32:
 432 0194 1695      		lsr r17
 433 0196 1695      		lsr r17
  63:buttons.c     **** 
  64:buttons.c     ****         //g_buttons &= ~(BUTTON_RIGHT_STATE_MASK);
  65:buttons.c     ****         //g_buttons |= (g_buttons_last & BUTTON_RIGHT_STATE_MASK);
  66:buttons.c     **** 
  67:buttons.c     ****         // setup buttons according to the state
  68:buttons.c     ****         if (is_bit_set(g_buttons_last, BUTTON_ACTIVE_RIGHT_PART))
 434               		.stabn	68,0,69,.LM33-.LFBB10
 435               	.LM33:
 436 0198 8091 0000 		lds r24,g_buttons_last
 437 019c 9091 0000 		lds r25,(g_buttons_last)+1
 438 01a0 A091 0000 		lds r26,(g_buttons_last)+2
 439 01a4 B091 0000 		lds r27,(g_buttons_last)+3
 440 01a8 E12E      		mov r14,r17
 441 01aa FF24      		clr r15
 442 01ac 00E0      		ldi r16,lo8(0)
 443 01ae 10E0      		ldi r17,hi8(0)
 444 01b0 2091 0000 		lds r18,g_buttons
GAS LISTING /tmp/cclbRunW.s 			page 10


 445 01b4 3091 0000 		lds r19,(g_buttons)+1
 446 01b8 4091 0000 		lds r20,(g_buttons)+2
 447 01bc 5091 0000 		lds r21,(g_buttons)+3
 448 01c0 B7FF      		sbrs r27,7
 449 01c2 00C0      		rjmp .L21
  69:buttons.c     ****         {
  70:buttons.c     ****             ENABLE_RADIO_BUTTON_RIGHT_PART();
 450               		.stabn	68,0,71,.LM34-.LFBB10
 451               	.LM34:
 452 01c4 AF98      		cbi 53-32,7
 453 01c6 AE9A      		sbi 53-32,6
  71:buttons.c     **** 
  72:buttons.c     ****             g_buttons &= ~(BUTTON_RIGHT_STATE_MASK_1);
  73:buttons.c     ****             g_buttons |= ((uint32_t)state << 0);
 454               		.stabn	68,0,74,.LM35-.LFBB10
 455               	.LM35:
 456 01c8 207C      		andi r18,lo8(2147483584)
 457 01ca 5F77      		andi r21,hhi8(2147483584)
  74:buttons.c     **** 
  75:buttons.c     ****             g_buttons &= ~(1L << BUTTON_ACTIVE_RIGHT_PART);
 458               		.stabn	68,0,76,.LM36-.LFBB10
 459               	.LM36:
 460 01cc 2E29      		or r18,r14
 461 01ce 3F29      		or r19,r15
 462 01d0 402B      		or r20,r16
 463 01d2 512B      		or r21,r17
 464 01d4 2093 0000 		sts g_buttons,r18
 465 01d8 3093 0000 		sts (g_buttons)+1,r19
 466 01dc 4093 0000 		sts (g_buttons)+2,r20
 467 01e0 5093 0000 		sts (g_buttons)+3,r21
 468 01e4 00C0      		rjmp .L20
 469               	.L21:
  76:buttons.c     ****         }else
  77:buttons.c     ****         {
  78:buttons.c     ****             ENABLE_RADIO_BUTTON_LEFT_PART();
 470               		.stabn	68,0,79,.LM37-.LFBB10
 471               	.LM37:
 472 01e6 AE98      		cbi 53-32,6
 473 01e8 AF9A      		sbi 53-32,7
  79:buttons.c     **** 
  80:buttons.c     ****             g_buttons &= ~(BUTTON_RIGHT_STATE_MASK_2);
  81:buttons.c     ****             g_buttons |= ((uint32_t)state << 6);
 474               		.stabn	68,0,82,.LM38-.LFBB10
 475               	.LM38:
 476 01ea F6E0      		ldi r31,6
 477 01ec EE0C      	1:	lsl r14
 478 01ee FF1C      		rol r15
 479 01f0 001F      		rol r16
 480 01f2 111F      		rol r17
 481 01f4 FA95      		dec r31
 482 01f6 01F4      		brne 1b
 483 01f8 2F73      		andi r18,lo8(-4033)
 484 01fa 307F      		andi r19,hi8(-4033)
 485 01fc E22A      		or r14,r18
 486 01fe F32A      		or r15,r19
 487 0200 042B      		or r16,r20
 488 0202 152B      		or r17,r21
GAS LISTING /tmp/cclbRunW.s 			page 11


  82:buttons.c     **** 
  83:buttons.c     ****             g_buttons |= (1L << BUTTON_ACTIVE_RIGHT_PART);
 489               		.stabn	68,0,84,.LM39-.LFBB10
 490               	.LM39:
 491 0204 80E0      		ldi r24,lo8(-2147483648)
 492 0206 90E0      		ldi r25,hi8(-2147483648)
 493 0208 A0E0      		ldi r26,hlo8(-2147483648)
 494 020a B0E8      		ldi r27,hhi8(-2147483648)
 495 020c E82A      		or r14,r24
 496 020e F92A      		or r15,r25
 497 0210 0A2B      		or r16,r26
 498 0212 1B2B      		or r17,r27
 499 0214 E092 0000 		sts g_buttons,r14
 500 0218 F092 0000 		sts (g_buttons)+1,r15
 501 021c 0093 0000 		sts (g_buttons)+2,r16
 502 0220 1093 0000 		sts (g_buttons)+3,r17
 503               	.L20:
 504               	.LBE2:
  84:buttons.c     ****         }
  85:buttons.c     ****     }
  86:buttons.c     **** 
  87:buttons.c     ****     // ----- Second read the BMBT Buttons -----
  88:buttons.c     ****     if (i2c_start(PORT_EXPANDER_BMBT_ADD + I2C_READ) == 0)
 505               		.stabn	68,0,89,.LM40-.LFBB10
 506               	.LM40:
 507 0224 85E4      		ldi r24,lo8(69)
 508 0226 0E94 0000 		call i2c_start
 509 022a 8823      		tst r24
 510 022c 01F4      		brne .L22
 511               	.LBB3:
  89:buttons.c     ****     {
  90:buttons.c     ****         unsigned char state = ~(i2c_readNak());
 512               		.stabn	68,0,91,.LM41-.LFBB10
 513               	.LM41:
 514 022e 0E94 0000 		call i2c_readNak
 515 0232 E82E      		mov r14,r24
  91:buttons.c     ****         i2c_stop();
 516               		.stabn	68,0,92,.LM42-.LFBB10
 517               	.LM42:
 518 0234 0E94 0000 		call i2c_stop
  92:buttons.c     **** 
  93:buttons.c     ****         g_buttons &= ~(BUTTON_LEFT_STATE_MASK);
 519               		.stabn	68,0,94,.LM43-.LFBB10
 520               	.LM43:
 521 0238 8091 0000 		lds r24,g_buttons
 522 023c 9091 0000 		lds r25,(g_buttons)+1
 523 0240 A091 0000 		lds r26,(g_buttons)+2
 524 0244 B091 0000 		lds r27,(g_buttons)+3
 525 0248 9F70      		andi r25,hi8(-1044481)
 526 024a A07F      		andi r26,hlo8(-1044481)
  94:buttons.c     ****         g_buttons |= ((uint32_t)state << 12);
 527               		.stabn	68,0,95,.LM44-.LFBB10
 528               	.LM44:
 529 024c E094      		com r14
 530 024e FF24      		clr r15
 531 0250 00E0      		ldi r16,lo8(0)
 532 0252 10E0      		ldi r17,hi8(0)
GAS LISTING /tmp/cclbRunW.s 			page 12


 533 0254 ECE0      		ldi r30,12
 534 0256 EE0C      	1:	lsl r14
 535 0258 FF1C      		rol r15
 536 025a 001F      		rol r16
 537 025c 111F      		rol r17
 538 025e EA95      		dec r30
 539 0260 01F4      		brne 1b
 540 0262 E82A      		or r14,r24
 541 0264 F92A      		or r15,r25
 542 0266 0A2B      		or r16,r26
 543 0268 1B2B      		or r17,r27
 544 026a E092 0000 		sts g_buttons,r14
 545 026e F092 0000 		sts (g_buttons)+1,r15
 546 0272 0093 0000 		sts (g_buttons)+2,r16
 547 0276 1093 0000 		sts (g_buttons)+3,r17
 548               	.L22:
 549               	.LBE3:
  95:buttons.c     **** 
  96:buttons.c     ****     }
  97:buttons.c     **** 
  98:buttons.c     ****     // ----- Third ask both encoders -----
  99:buttons.c     ****     if (i2c_start(PORT_EXPANDER_ENCODER_ADD + I2C_READ) == 0)
 550               		.stabn	68,0,100,.LM45-.LFBB10
 551               	.LM45:
 552 027a 81E4      		ldi r24,lo8(65)
 553 027c 0E94 0000 		call i2c_start
 554 0280 8823      		tst r24
 555 0282 01F0      		breq .+2
 556 0284 00C0      		rjmp .L23
 557               	.LBB4:
 100:buttons.c     ****     {
 101:buttons.c     ****         unsigned char state = ~(i2c_readNak());
 558               		.stabn	68,0,102,.LM46-.LFBB10
 559               	.LM46:
 560 0286 0E94 0000 		call i2c_readNak
 561 028a 182F      		mov r17,r24
 562 028c 1095      		com r17
 102:buttons.c     ****         i2c_stop();
 563               		.stabn	68,0,103,.LM47-.LFBB10
 564               	.LM47:
 565 028e 0E94 0000 		call i2c_stop
 103:buttons.c     **** 
 104:buttons.c     ****         // we ignore bits 3 and 4, since they are not connected
 105:buttons.c     ****         state &= ~(1 << 3) & ~(1 << 4);
 566               		.stabn	68,0,106,.LM48-.LFBB10
 567               	.LM48:
 568 0292 F12F      		mov r31,r17
 569 0294 F77E      		andi r31,lo8(-25)
 106:buttons.c     **** 
 107:buttons.c     ****         // set acquired states
 108:buttons.c     ****         g_buttons &= ~(BUTTON_KNOBS_STATE_MASK);
 109:buttons.c     ****         g_buttons |= ((uint32_t)state << 20);
 570               		.stabn	68,0,110,.LM49-.LFBB10
 571               	.LM49:
 572 0296 2F2F      		mov r18,r31
 573 0298 30E0      		ldi r19,lo8(0)
 574 029a 40E0      		ldi r20,lo8(0)
GAS LISTING /tmp/cclbRunW.s 			page 13


 575 029c 50E0      		ldi r21,hi8(0)
 576 029e 74E1      		ldi r23,20
 577 02a0 220F      	1:	lsl r18
 578 02a2 331F      		rol r19
 579 02a4 441F      		rol r20
 580 02a6 551F      		rol r21
 581 02a8 7A95      		dec r23
 582 02aa 01F4      		brne 1b
 583 02ac 8091 0000 		lds r24,g_buttons
 584 02b0 9091 0000 		lds r25,(g_buttons)+1
 585 02b4 A091 0000 		lds r26,(g_buttons)+2
 586 02b8 B091 0000 		lds r27,(g_buttons)+3
 587 02bc AF70      		andi r26,hlo8(-1072693249)
 588 02be B07C      		andi r27,hhi8(-1072693249)
 589 02c0 282B      		or r18,r24
 590 02c2 392B      		or r19,r25
 591 02c4 4A2B      		or r20,r26
 592 02c6 5B2B      		or r21,r27
 593               	.LBB5:
 110:buttons.c     ****         
 111:buttons.c     **** 
 112:buttons.c     ****         // check BMBT-Encoders
 113:buttons.c     ****         {
 114:buttons.c     ****             register char oldEncoder1 = is_bit_set(g_buttons_last, BUTTON_BMBT_ENCODER_OUT1);
 594               		.stabn	68,0,115,.LM50-.LFBB10
 595               	.LM50:
 596 02c8 C090 0000 		lds r12,g_buttons_last
 597 02cc D090 0000 		lds r13,(g_buttons_last)+1
 598 02d0 E090 0000 		lds r14,(g_buttons_last)+2
 599 02d4 F090 0000 		lds r15,(g_buttons_last)+3
 115:buttons.c     ****             register char oldEncoder2 = is_bit_set(g_buttons_last, BUTTON_BMBT_ENCODER_OUT2);
 600               		.stabn	68,0,116,.LM51-.LFBB10
 601               	.LM51:
 602 02d8 D701      		movw r26,r14
 603 02da C601      		movw r24,r12
 604 02dc 66E1      		ldi r22,22
 605 02de B695      	1:	lsr r27
 606 02e0 A795      		ror r26
 607 02e2 9795      		ror r25
 608 02e4 8795      		ror r24
 609 02e6 6A95      		dec r22
 610 02e8 01F4      		brne 1b
 611 02ea 8170      		andi r24,lo8(1)
 116:buttons.c     ****             register char clearBit1 = state & (1 << 1);
 117:buttons.c     ****             register char clearBit2 = state & (1 << 2);
 612               		.stabn	68,0,118,.LM52-.LFBB10
 613               	.LM52:
 614 02ec 712F      		mov r23,r17
 615 02ee 7470      		andi r23,lo8(4)
 118:buttons.c     ****             register char setBit1 = !clearBit1;
 616               		.stabn	68,0,119,.LM53-.LFBB10
 617               	.LM53:
 618 02f0 60E0      		ldi r22,lo8(0)
 619 02f2 E12F      		mov r30,r17
 620 02f4 E270      		andi r30,lo8(2)
 621 02f6 11FF      		sbrs r17,1
 622 02f8 61E0      		ldi r22,lo8(1)
GAS LISTING /tmp/cclbRunW.s 			page 14


 623               	.L24:
 119:buttons.c     ****             register char setBit2 = !clearBit2;
 624               		.stabn	68,0,120,.LM54-.LFBB10
 625               	.LM54:
 626 02fa 90E0      		ldi r25,lo8(0)
 627 02fc 7723      		tst r23
 628 02fe 01F4      		brne .L25
 629 0300 91E0      		ldi r25,lo8(1)
 630               	.L25:
 120:buttons.c     **** 
 121:buttons.c     ****             if ((oldEncoder1 && !oldEncoder2 && clearBit2)
 631               		.stabn	68,0,122,.LM55-.LFBB10
 632               	.LM55:
 633 0302 E5FE      		sbrs r14,5
 634 0304 00C0      		rjmp .L26
 635 0306 8823      		tst r24
 636 0308 01F4      		brne .L27
 637 030a 7723      		tst r23
 638 030c 01F4      		brne .L28
 639 030e 00C0      		rjmp .L60
 640               	.L26:
 641 0310 8823      		tst r24
 642 0312 01F0      		breq .L30
 643 0314 9923      		tst r25
 644 0316 01F4      		brne .L28
 645 0318 00C0      		rjmp .L61
 646               	.L27:
 647 031a 6623      		tst r22
 648 031c 01F4      		brne .L28
 649 031e 00C0      		rjmp .L62
 650               	.L30:
 651 0320 EE23      		tst r30
 652 0322 01F0      		breq .L33
 653               	.L28:
 122:buttons.c     ****                 || (!oldEncoder1 && oldEncoder2 && setBit2)
 123:buttons.c     ****                 || (oldEncoder2 && oldEncoder1 && setBit1)
 124:buttons.c     ****                 || (!oldEncoder2 && !oldEncoder1 && clearBit1))
 125:buttons.c     ****             {
 126:buttons.c     ****                 g_buttons |= (1L << BUTTON_BMBT_CCW);
 127:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_BMBT_CW);
 654               		.stabn	68,0,128,.LM56-.LFBB10
 655               	.LM56:
 656 0324 5160      		ori r21,hhi8(16777216)
 657 0326 00C0      		rjmp .L36
 658               	.L33:
 128:buttons.c     ****             }else
 129:buttons.c     ****             if ((!oldEncoder1 && !oldEncoder2 && clearBit2)
 659               		.stabn	68,0,130,.LM57-.LFBB10
 660               	.LM57:
 661 0328 7723      		tst r23
 662 032a 01F4      		brne .L35
 663 032c 00C0      		rjmp .L36
 664               	.L62:
 665 032e 9923      		tst r25
 666 0330 01F4      		brne .L35
 667 0332 00C0      		rjmp .L36
 668               	.L60:
GAS LISTING /tmp/cclbRunW.s 			page 15


 669 0334 6623      		tst r22
 670 0336 01F4      		brne .L35
 671 0338 00C0      		rjmp .L36
 672               	.L61:
 673 033a E111      		cpse r30,__zero_reg__
 674               	.L35:
 130:buttons.c     ****                   || (oldEncoder1 && oldEncoder2 && setBit2)
 131:buttons.c     ****                   || (!oldEncoder2 && oldEncoder1 && setBit1)
 132:buttons.c     ****                   || (oldEncoder2 && !oldEncoder1 && clearBit1))
 133:buttons.c     ****             {
 134:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_BMBT_CCW);
 135:buttons.c     ****                 g_buttons |= (1L << BUTTON_BMBT_CW);
 675               		.stabn	68,0,136,.LM58-.LFBB10
 676               	.LM58:
 677 033c 4068      		ori r20,hlo8(8388608)
 678               	.L36:
 136:buttons.c     ****             }else
 137:buttons.c     ****             {
 138:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_BMBT_CCW);
 139:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_BMBT_CW);
 679               		.stabn	68,0,140,.LM59-.LFBB10
 680               	.LM59:
 681 033e 2093 0000 		sts g_buttons,r18
 682 0342 3093 0000 		sts (g_buttons)+1,r19
 683 0346 4093 0000 		sts (g_buttons)+2,r20
 684 034a 5093 0000 		sts (g_buttons)+3,r21
 685               	.LBE5:
 686               	.LBB6:
 140:buttons.c     ****             }
 141:buttons.c     ****         }
 142:buttons.c     **** 
 143:buttons.c     ****         // check RADIO-Encoders
 144:buttons.c     ****         {
 145:buttons.c     ****             register char oldEncoder1 = is_bit_set(g_buttons_last, BUTTON_RADIO_ENCODER_OUT1);
 146:buttons.c     ****             register char oldEncoder2 = is_bit_set(g_buttons_last, BUTTON_RADIO_ENCODER_OUT2);
 687               		.stabn	68,0,147,.LM60-.LFBB10
 688               	.LM60:
 689 034e D701      		movw r26,r14
 690 0350 C601      		movw r24,r12
 691 0352 2AE1      		ldi r18,26
 692 0354 B695      	1:	lsr r27
 693 0356 A795      		ror r26
 694 0358 9795      		ror r25
 695 035a 8795      		ror r24
 696 035c 2A95      		dec r18
 697 035e 01F4      		brne 1b
 698 0360 8170      		andi r24,lo8(1)
 147:buttons.c     ****             register char clearBit1 = state & (1 << 5);
 148:buttons.c     ****             register char clearBit2 = state & (1 << 6);
 699               		.stabn	68,0,149,.LM61-.LFBB10
 700               	.LM61:
 701 0362 7F2F      		mov r23,r31
 702 0364 7074      		andi r23,lo8(64)
 149:buttons.c     ****             register char setBit1 = !clearBit1;
 703               		.stabn	68,0,150,.LM62-.LFBB10
 704               	.LM62:
 705 0366 60E0      		ldi r22,lo8(0)
GAS LISTING /tmp/cclbRunW.s 			page 16


 706 0368 EF2F      		mov r30,r31
 707 036a E072      		andi r30,lo8(32)
 708 036c F5FF      		sbrs r31,5
 709 036e 61E0      		ldi r22,lo8(1)
 710               	.L37:
 150:buttons.c     ****             register char setBit2 = !clearBit2;
 711               		.stabn	68,0,151,.LM63-.LFBB10
 712               	.LM63:
 713 0370 90E0      		ldi r25,lo8(0)
 714 0372 7723      		tst r23
 715 0374 01F4      		brne .L38
 716 0376 91E0      		ldi r25,lo8(1)
 717               	.L38:
 718 0378 2091 0000 		lds r18,g_buttons
 719 037c 3091 0000 		lds r19,(g_buttons)+1
 720 0380 4091 0000 		lds r20,(g_buttons)+2
 721 0384 5091 0000 		lds r21,(g_buttons)+3
 151:buttons.c     **** 
 152:buttons.c     ****             if ((oldEncoder1 && !oldEncoder2 && clearBit2)
 722               		.stabn	68,0,153,.LM64-.LFBB10
 723               	.LM64:
 724 0388 F1FE      		sbrs r15,1
 725 038a 00C0      		rjmp .L39
 726 038c 8823      		tst r24
 727 038e 01F4      		brne .L40
 728 0390 7723      		tst r23
 729 0392 01F4      		brne .L41
 730 0394 00C0      		rjmp .L63
 731               	.L39:
 732 0396 8823      		tst r24
 733 0398 01F0      		breq .L43
 734 039a 9923      		tst r25
 735 039c 01F4      		brne .L41
 736 039e 00C0      		rjmp .L64
 737               	.L40:
 738 03a0 6623      		tst r22
 739 03a2 01F4      		brne .L41
 740 03a4 00C0      		rjmp .L65
 741               	.L43:
 742 03a6 EE23      		tst r30
 743 03a8 01F0      		breq .L46
 744               	.L41:
 153:buttons.c     ****                 || (!oldEncoder1 && oldEncoder2 && setBit2)
 154:buttons.c     ****                 || (oldEncoder2 && oldEncoder1 && setBit1)
 155:buttons.c     ****                 || (!oldEncoder2 && !oldEncoder1 && clearBit1))
 156:buttons.c     ****             {
 157:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_RADIO_CCW);
 745               		.stabn	68,0,158,.LM65-.LFBB10
 746               	.LM65:
 747 03aa 5F7D      		andi r21,hhi8(-536870913)
 158:buttons.c     ****                 g_buttons |= (1L << BUTTON_RADIO_CW);
 748               		.stabn	68,0,159,.LM66-.LFBB10
 749               	.LM66:
 750 03ac 5061      		ori r21,hhi8(268435456)
 751 03ae 00C0      		rjmp .L58
 752               	.L46:
 159:buttons.c     ****             }else
GAS LISTING /tmp/cclbRunW.s 			page 17


 160:buttons.c     ****             if ((!oldEncoder1 && !oldEncoder2 && clearBit2)
 753               		.stabn	68,0,161,.LM67-.LFBB10
 754               	.LM67:
 755 03b0 7723      		tst r23
 756 03b2 01F4      		brne .L47
 757 03b4 00C0      		rjmp .L48
 758               	.L65:
 759 03b6 9923      		tst r25
 760 03b8 01F4      		brne .L47
 761 03ba 00C0      		rjmp .L48
 762               	.L63:
 763 03bc 6623      		tst r22
 764 03be 01F4      		brne .L47
 765 03c0 00C0      		rjmp .L48
 766               	.L64:
 767 03c2 EE23      		tst r30
 768 03c4 01F0      		breq .L48
 769               	.L47:
 161:buttons.c     ****                   || (oldEncoder1 && oldEncoder2 && setBit2)
 162:buttons.c     ****                   || (!oldEncoder2 && oldEncoder1 && setBit1)
 163:buttons.c     ****                   || (oldEncoder2 && !oldEncoder1 && clearBit1))
 164:buttons.c     ****             {
 165:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_RADIO_CW);
 770               		.stabn	68,0,166,.LM68-.LFBB10
 771               	.LM68:
 772 03c6 5F7E      		andi r21,hhi8(-268435457)
 166:buttons.c     ****                 g_buttons |= (1L << BUTTON_RADIO_CCW);
 773               		.stabn	68,0,167,.LM69-.LFBB10
 774               	.LM69:
 775 03c8 5062      		ori r21,hhi8(536870912)
 776 03ca 00C0      		rjmp .L58
 777               	.L48:
 167:buttons.c     ****             }else
 168:buttons.c     ****             {
 169:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_RADIO_CW);
 170:buttons.c     ****                 g_buttons &= ~(1L << BUTTON_RADIO_CCW);
 778               		.stabn	68,0,171,.LM70-.LFBB10
 779               	.LM70:
 780 03cc 5F7C      		andi r21,hhi8(-805306369)
 781               	.L58:
 782 03ce 2093 0000 		sts g_buttons,r18
 783 03d2 3093 0000 		sts (g_buttons)+1,r19
 784 03d6 4093 0000 		sts (g_buttons)+2,r20
 785 03da 5093 0000 		sts (g_buttons)+3,r21
 786               	.L23:
 787 03de 2091 0000 		lds r18,g_buttons
 788 03e2 3091 0000 		lds r19,(g_buttons)+1
 789 03e6 4091 0000 		lds r20,(g_buttons)+2
 790 03ea 5091 0000 		lds r21,(g_buttons)+3
 791               	.LBE6:
 792               	.LBE4:
 171:buttons.c     ****             }
 172:buttons.c     ****         }
 173:buttons.c     ****     }
 174:buttons.c     **** 
 175:buttons.c     ****     // ----- Read Eject Button -----
 176:buttons.c     ****     if (EJECT_BUTTON_STATE())
GAS LISTING /tmp/cclbRunW.s 			page 18


 793               		.stabn	68,0,177,.LM71-.LFBB10
 794               	.LM71:
 795 03ee 8499      		sbic 48-32,4
 796 03f0 00C0      		rjmp .L49
 177:buttons.c     ****         g_buttons |= (1L << BUTTON_EJECT);
 797               		.stabn	68,0,178,.LM72-.LFBB10
 798               	.LM72:
 799 03f2 5064      		ori r21,hhi8(1073741824)
 800 03f4 00C0      		rjmp .L59
 801               	.L49:
 178:buttons.c     ****     else
 179:buttons.c     ****         g_buttons &= ~(1L << BUTTON_EJECT);
 802               		.stabn	68,0,180,.LM73-.LFBB10
 803               	.LM73:
 804 03f6 5F7B      		andi r21,hhi8(-1073741825)
 805               	.L59:
 806 03f8 2093 0000 		sts g_buttons,r18
 807 03fc 3093 0000 		sts (g_buttons)+1,r19
 808 0400 4093 0000 		sts (g_buttons)+2,r20
 809 0404 5093 0000 		sts (g_buttons)+3,r21
 180:buttons.c     **** 
 181:buttons.c     **** 
 182:buttons.c     ****     // compute down, pressed and released states
 183:buttons.c     ****     g_buttonsDown       = g_buttons_last    & g_buttons;
 810               		.stabn	68,0,184,.LM74-.LFBB10
 811               	.LM74:
 812 0408 E090 0000 		lds r14,g_buttons_last
 813 040c F090 0000 		lds r15,(g_buttons_last)+1
 814 0410 0091 0000 		lds r16,(g_buttons_last)+2
 815 0414 1091 0000 		lds r17,(g_buttons_last)+3
 816 0418 A090 0000 		lds r10,g_buttons
 817 041c B090 0000 		lds r11,(g_buttons)+1
 818 0420 C090 0000 		lds r12,(g_buttons)+2
 819 0424 D090 0000 		lds r13,(g_buttons)+3
 820 0428 3501      		movw r6,r10
 821 042a 4601      		movw r8,r12
 822 042c 6E20      		and r6,r14
 823 042e 7F20      		and r7,r15
 824 0430 8022      		and r8,r16
 825 0432 9122      		and r9,r17
 826 0434 6092 0000 		sts g_buttonsDown,r6
 827 0438 7092 0000 		sts (g_buttonsDown)+1,r7
 828 043c 8092 0000 		sts (g_buttonsDown)+2,r8
 829 0440 9092 0000 		sts (g_buttonsDown)+3,r9
 184:buttons.c     ****     g_buttonsPressed    = (~g_buttons_last) & g_buttons;
 830               		.stabn	68,0,185,.LM75-.LFBB10
 831               	.LM75:
 832 0444 A801      		movw r20,r16
 833 0446 9701      		movw r18,r14
 834 0448 2095      		com r18
 835 044a 3095      		com r19
 836 044c 4095      		com r20
 837 044e 5095      		com r21
 838 0450 2A21      		and r18,r10
 839 0452 3B21      		and r19,r11
 840 0454 4C21      		and r20,r12
 841 0456 5D21      		and r21,r13
GAS LISTING /tmp/cclbRunW.s 			page 19


 842 0458 2093 0000 		sts g_buttonsPressed,r18
 843 045c 3093 0000 		sts (g_buttonsPressed)+1,r19
 844 0460 4093 0000 		sts (g_buttonsPressed)+2,r20
 845 0464 5093 0000 		sts (g_buttonsPressed)+3,r21
 185:buttons.c     ****     g_buttonsRelease    = g_buttons_last    & (~g_buttons);
 846               		.stabn	68,0,186,.LM76-.LFBB10
 847               	.LM76:
 848 0468 D601      		movw r26,r12
 849 046a C501      		movw r24,r10
 850 046c 8095      		com r24
 851 046e 9095      		com r25
 852 0470 A095      		com r26
 853 0472 B095      		com r27
 854 0474 8E21      		and r24,r14
 855 0476 9F21      		and r25,r15
 856 0478 A023      		and r26,r16
 857 047a B123      		and r27,r17
 858 047c 8093 0000 		sts g_buttonsRelease,r24
 859 0480 9093 0000 		sts (g_buttonsRelease)+1,r25
 860 0484 A093 0000 		sts (g_buttonsRelease)+2,r26
 861 0488 B093 0000 		sts (g_buttonsRelease)+3,r27
 186:buttons.c     **** 
 187:buttons.c     ****     // swap current with the old state
 188:buttons.c     ****     g_buttonsDown_last = g_buttonsDown;
 862               		.stabn	68,0,189,.LM77-.LFBB10
 863               	.LM77:
 864 048c 6092 0000 		sts g_buttonsDown_last,r6
 865 0490 7092 0000 		sts (g_buttonsDown_last)+1,r7
 866 0494 8092 0000 		sts (g_buttonsDown_last)+2,r8
 867 0498 9092 0000 		sts (g_buttonsDown_last)+3,r9
 189:buttons.c     ****     g_buttonsPressed_last = g_buttonsPressed;
 868               		.stabn	68,0,190,.LM78-.LFBB10
 869               	.LM78:
 870 049c 2093 0000 		sts g_buttonsPressed_last,r18
 871 04a0 3093 0000 		sts (g_buttonsPressed_last)+1,r19
 872 04a4 4093 0000 		sts (g_buttonsPressed_last)+2,r20
 873 04a8 5093 0000 		sts (g_buttonsPressed_last)+3,r21
 190:buttons.c     ****     g_buttonsRelease_last = g_buttonsRelease;
 874               		.stabn	68,0,191,.LM79-.LFBB10
 875               	.LM79:
 876 04ac 8093 0000 		sts g_buttonsRelease_last,r24
 877 04b0 9093 0000 		sts (g_buttonsRelease_last)+1,r25
 878 04b4 A093 0000 		sts (g_buttonsRelease_last)+2,r26
 879 04b8 B093 0000 		sts (g_buttonsRelease_last)+3,r27
 191:buttons.c     ****     g_buttons_last = g_buttons;
 880               		.stabn	68,0,192,.LM80-.LFBB10
 881               	.LM80:
 882 04bc A092 0000 		sts g_buttons_last,r10
 883 04c0 B092 0000 		sts (g_buttons_last)+1,r11
 884 04c4 C092 0000 		sts (g_buttons_last)+2,r12
 885 04c8 D092 0000 		sts (g_buttons_last)+3,r13
 886               	/* epilogue start */
 192:buttons.c     **** }
 887               		.stabn	68,0,193,.LM81-.LFBB10
 888               	.LM81:
 889 04cc 1F91      		pop r17
 890 04ce 0F91      		pop r16
GAS LISTING /tmp/cclbRunW.s 			page 20


 891 04d0 FF90      		pop r15
 892 04d2 EF90      		pop r14
 893 04d4 DF90      		pop r13
 894 04d6 CF90      		pop r12
 895 04d8 BF90      		pop r11
 896 04da AF90      		pop r10
 897 04dc 9F90      		pop r9
 898 04de 8F90      		pop r8
 899 04e0 7F90      		pop r7
 900 04e2 6F90      		pop r6
 901 04e4 0895      		ret
 902               		.size	button_tick, .-button_tick
 903               		.stabs	"state:r(0,11)",64,0,59,17
 904               		.stabn	192,0,0,.LBB2-.LFBB10
 905               		.stabn	224,0,0,.LBE2-.LFBB10
 906               		.stabs	"state:r(0,11)",64,0,102,17
 907               		.stabn	192,0,0,.LBB4-.LFBB10
 908               		.stabs	"oldEncoder2:r(0,2)",64,0,116,24
 909               		.stabs	"clearBit1:r(0,2)",64,0,117,30
 910               		.stabs	"clearBit2:r(0,2)",64,0,118,23
 911               		.stabs	"setBit1:r(0,2)",64,0,119,22
 912               		.stabs	"setBit2:r(0,2)",64,0,120,25
 913               		.stabn	192,0,0,.LBB5-.LFBB10
 914               		.stabn	224,0,0,.LBE5-.LFBB10
 915               		.stabs	"oldEncoder2:r(0,2)",64,0,147,24
 916               		.stabs	"clearBit1:r(0,2)",64,0,148,30
 917               		.stabs	"clearBit2:r(0,2)",64,0,149,23
 918               		.stabs	"setBit1:r(0,2)",64,0,150,22
 919               		.stabs	"setBit2:r(0,2)",64,0,151,25
 920               		.stabn	192,0,0,.LBB6-.LFBB10
 921               		.stabn	224,0,0,.LBE6-.LFBB10
 922               		.stabn	224,0,0,.LBE4-.LFBB10
 923               	.Lscope10:
 924               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 925               		.stabd	78,0,0
 926               	.global	g_buttons
 927               	.global	g_buttons
 928               		.section .bss
 929               		.type	g_buttons, @object
 930               		.size	g_buttons, 4
 931               	g_buttons:
 932 0000 0000 0000 		.skip 4,0
 933               	.global	g_buttonsDown
 934               	.global	g_buttonsDown
 935               		.type	g_buttonsDown, @object
 936               		.size	g_buttonsDown, 4
 937               	g_buttonsDown:
 938 0004 0000 0000 		.skip 4,0
 939               	.global	g_buttonsPressed
 940               	.global	g_buttonsPressed
 941               		.type	g_buttonsPressed, @object
 942               		.size	g_buttonsPressed, 4
 943               	g_buttonsPressed:
 944 0008 0000 0000 		.skip 4,0
 945               	.global	g_buttonsRelease
 946               	.global	g_buttonsRelease
 947               		.type	g_buttonsRelease, @object
GAS LISTING /tmp/cclbRunW.s 			page 21


 948               		.size	g_buttonsRelease, 4
 949               	g_buttonsRelease:
 950 000c 0000 0000 		.skip 4,0
 951               	.global	g_buttons_last
 952               	.global	g_buttons_last
 953               		.type	g_buttons_last, @object
 954               		.size	g_buttons_last, 4
 955               	g_buttons_last:
 956 0010 0000 0000 		.skip 4,0
 957               	.global	g_buttonsDown_last
 958               	.global	g_buttonsDown_last
 959               		.type	g_buttonsDown_last, @object
 960               		.size	g_buttonsDown_last, 4
 961               	g_buttonsDown_last:
 962 0014 0000 0000 		.skip 4,0
 963               	.global	g_buttonsPressed_last
 964               	.global	g_buttonsPressed_last
 965               		.type	g_buttonsPressed_last, @object
 966               		.size	g_buttonsPressed_last, 4
 967               	g_buttonsPressed_last:
 968 0018 0000 0000 		.skip 4,0
 969               	.global	g_buttonsRelease_last
 970               	.global	g_buttonsRelease_last
 971               		.type	g_buttonsRelease_last, @object
 972               		.size	g_buttonsRelease_last, 4
 973               	g_buttonsRelease_last:
 974 001c 0000 0000 		.skip 4,0
 975               		.stabs	"g_buttons:G(1,2)",32,0,8,0
 976               		.stabs	"g_buttonsDown:G(1,2)",32,0,9,0
 977               		.stabs	"g_buttonsPressed:G(1,2)",32,0,10,0
 978               		.stabs	"g_buttonsRelease:G(1,2)",32,0,11,0
 979               		.stabs	"g_buttons_last:G(1,2)",32,0,13,0
 980               		.stabs	"g_buttonsDown_last:G(1,2)",32,0,14,0
 981               		.stabs	"g_buttonsPressed_last:G(1,2)",32,0,15,0
 982               		.stabs	"g_buttonsRelease_last:G(1,2)",32,0,16,0
 983               		.text
 984               		.stabs	"",100,0,0,.Letext0
 985               	.Letext0:
GAS LISTING /tmp/cclbRunW.s 			page 22


DEFINED SYMBOLS
                            *ABS*:00000000 buttons.c
     /tmp/cclbRunW.s:2      *ABS*:0000003f __SREG__
     /tmp/cclbRunW.s:3      *ABS*:0000003e __SP_H__
     /tmp/cclbRunW.s:4      *ABS*:0000003d __SP_L__
     /tmp/cclbRunW.s:5      *ABS*:00000034 __CCP__
     /tmp/cclbRunW.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/cclbRunW.s:7      *ABS*:00000001 __zero_reg__
     /tmp/cclbRunW.s:105    .text:00000000 button
     /tmp/cclbRunW.s:931    .bss:00000000 g_buttons
     /tmp/cclbRunW.s:137    .text:00000024 button_down
     /tmp/cclbRunW.s:937    .bss:00000004 g_buttonsDown
     /tmp/cclbRunW.s:169    .text:00000048 button_pressed
     /tmp/cclbRunW.s:943    .bss:00000008 g_buttonsPressed
     /tmp/cclbRunW.s:201    .text:0000006c button_released
     /tmp/cclbRunW.s:949    .bss:0000000c g_buttonsRelease
     /tmp/cclbRunW.s:232    .text:00000090 button_global
     /tmp/cclbRunW.s:254    .text:000000a2 button_global_down
     /tmp/cclbRunW.s:276    .text:000000b4 button_global_pressed
     /tmp/cclbRunW.s:298    .text:000000c6 button_global_released
     /tmp/cclbRunW.s:320    .text:000000d8 button_init
     /tmp/cclbRunW.s:955    .bss:00000010 g_buttons_last
     /tmp/cclbRunW.s:961    .bss:00000014 g_buttonsDown_last
     /tmp/cclbRunW.s:967    .bss:00000018 g_buttonsPressed_last
     /tmp/cclbRunW.s:973    .bss:0000001c g_buttonsRelease_last
     /tmp/cclbRunW.s:395    .text:00000164 button_tick

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
i2c_start
i2c_readNak
i2c_stop
